<div class="config-container">
    <header class="config-header">
        <h1>{{ 'SYSTEM_CONFIG.TITLE' | translate }}</h1>
        <p>{{ 'SYSTEM_CONFIG.DESCRIPTION' | translate }}</p>
    </header>

    <div class="config-grid-full">
        <mat-card class="premium-card">
            <mat-card-header>
                <div class="card-icon"><i class="bi bi-gear-wide-connected"></i></div>
                <mat-card-title>General Settings</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <div class="settings-form">
                    <div class="form-row">
                        <mat-form-field appearance="outline">
                            <mat-label>Organization Name</mat-label>
                            <input matInput [(ngModel)]="systemSettings.organizationName">
                        </mat-form-field>

                        <mat-form-field appearance="outline">
                            <mat-label>{{ 'SYSTEM_CONFIG.TIMEZONE' | translate }}</mat-label>
                            <mat-select [(ngModel)]="systemSettings.timezone">
                                <mat-option value="IST (UTC+05:30)">IST (UTC+05:30)</mat-option>
                                <mat-option value="UTC">UTC</mat-option>
                                <mat-option value="EST">EST</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>

                    <div class="form-row">
                        <mat-form-field appearance="outline">
                            <mat-label>{{ 'SYSTEM_CONFIG.CURRENCY' | translate }}</mat-label>
                            <mat-select [(ngModel)]="systemSettings.currency">
                                <mat-option value="INR (₹)">INR (₹)</mat-option>
                                <mat-option value="USD ($)">USD ($)</mat-option>
                                <mat-option value="EUR (€)">EUR (€)</mat-option>
                            </mat-select>
                        </mat-form-field>

                        <mat-form-field appearance="outline">
                            <mat-label>Date Format</mat-label>
                            <mat-select [(ngModel)]="systemSettings.dateFormat">
                                <mat-option value="DD/MM/YYYY">DD/MM/YYYY</mat-option>
                                <mat-option value="MM/DD/YYYY">MM/DD/YYYY</mat-option>
                                <mat-option value="YYYY-MM-DD">YYYY-MM-DD</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>

                    <div class="toggle-section">
                        <div class="toggle-item">
                            <div class="toggle-info">
                                <h3>PWA Support</h3>
                                <p>Enable installation and offline capabilities</p>
                            </div>
                            <mat-slide-toggle [(ngModel)]="systemSettings.pwaEnabled"
                                color="primary"></mat-slide-toggle>
                        </div>

                        <div class="toggle-item">
                            <div class="toggle-info">
                                <h3>Automatic Backup</h3>
                                <p>Schedule daily database backups</p>
                            </div>
                            <mat-slide-toggle [(ngModel)]="systemSettings.autoBackup"
                                color="primary"></mat-slide-toggle>
                        </div>
                    </div>

                    <!-- Dynamic Fields Section -->
                    <div class="dynamic-fields-divider mt-4" *ngIf="dynamicFields.length > 0">
                        <span class="divider-text">Custom Fields</span>
                    </div>

                    <div class="form-row" *ngIf="dynamicFields.length > 0">
                        <ng-container *ngFor="let field of dynamicFields">
                            <mat-form-field appearance="outline" *ngIf="field.type === 'text'">
                                <mat-label>{{field.label}}</mat-label>
                                <input matInput [(ngModel)]="field.value" [required]="field.required">
                            </mat-form-field>

                            <mat-form-field appearance="outline" *ngIf="field.type === 'number'">
                                <mat-label>{{field.label}}</mat-label>
                                <input matInput type="number" [(ngModel)]="field.value" [required]="field.required">
                            </mat-form-field>

                            <mat-form-field appearance="outline" *ngIf="field.type === 'date'">
                                <mat-label>{{field.label}}</mat-label>
                                <input matInput [matDatepicker]="picker" [(ngModel)]="field.value">
                                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                            </mat-form-field>

                            <div class="flex items-center gap-2" *ngIf="field.type === 'boolean'"
                                style="padding: 10px 0;">
                                <mat-slide-toggle [(ngModel)]="field.value"
                                    color="accent">{{field.label}}</mat-slide-toggle>
                            </div>
                        </ng-container>
                    </div>

                    <div class="form-actions mt-4">
                        <button mat-flat-button color="primary" class="btn-save" (click)="saveSettings()">
                            {{ 'COMMON.SAVE' | translate }}
                        </button>
                        <button mat-stroked-button class="btn-cancel">
                            {{ 'COMMON.CANCEL' | translate }}
                        </button>
                    </div>
                </div>
            </mat-card-content>
        </mat-card>
    </div>
</div>