<div class="p-5">
    <mat-card class="p-5" style="background-color: #AE8E481A;">
    </mat-card>
    <mat-card class="mt-5 mb-5">
        <mat-stepper [linear]="isLinear" #stepper class="p-2">
            <mat-step>
                <form name="basicDetailsForm" #basicDetailsForm="ngForm" (keydown.enter)="$event.preventDefault()">
                    <ng-template matStepLabel>OUTLET DETAILS</ng-template>
                    <div class="p-3">
                        <div class="d-flex mt-3">
                            <mat-form-field appearance="outline" class="w-600 me-5">
                                <mat-label>Outlet Name</mat-label>
                                <input matInput name="outletName" name="outletName" #outletName="ngModel"
                                    [(ngModel)]="dataObj.outletName" required />
                                <mat-error *ngIf="outletName.errors?.required">Value is required</mat-error>
                            </mat-form-field>
                            <mat-form-field appearance="outline" class="w-600">
                                <mat-label>Outlet Type</mat-label>
                                <mat-select name="outletType" name="outle" #outle="ngModel"
                                    [(ngModel)]="dataObj.outletType" required>
                                    <mat-option value="RESTAURANT">Restaurant</mat-option>
                                    <mat-option value="RETAIL">Retail</mat-option>
                                </mat-select>
                                <mat-error *ngIf="outle.errors?.required">Value is required</mat-error>
                            </mat-form-field>
                        </div>
                        <div class="d-flex mt-3">
                            <mat-form-field appearance="outline" class="w-600 me-5">
                                <mat-label>GST Number</mat-label>
                                <input matInput name="gstNum" #gstNum="ngModel" [(ngModel)]="dataObj.gstNumber"
                                    pattern="^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[A-Z0-9]{1}Z[A-Z0-9]{1}$" required />
                                <mat-error *ngIf="gstNum.errors?.required">Value is required</mat-error>
                                <mat-error *ngIf="gstNum.errors?.pattern">Invalid GST Number format</mat-error>
                            </mat-form-field>
                            <mat-form-field appearance="outline" class="w-600">
                                <mat-label>Fssai Number</mat-label>
                                <input matInput name="fssaiNumber" #fssaiNumber="ngModel"
                                    [(ngModel)]="dataObj.fssaiNumber" pattern="^[0-9]{14}$" required />
                                <mat-error *ngIf="fssaiNumber.errors?.required">Value is required</mat-error>
                            </mat-form-field>
                        </div>
                        <div class="d-flex justify-content-end mt-3">
                            <button mat-stroked-button color="accent" class="me-3"
                                style="height: 48px;width: 130px;">Cancel</button>
                            <button mat-flat-button color="accent" matStepperNext style="height: 48px;width: 146px;"
                                [disabled]="!basicDetailsForm.valid">Next</button>
                        </div>
                    </div>
                </form>
            </mat-step>
            <mat-step>
                <ng-template matStepLabel>OUTLET REGISTRATION TYPE</ng-template>
                <div class="row mt-5">
                    <div>
                        <label class="form-label">Outlet Registration Type*</label>
                        <mat-radio-group name=" outletRegistrationType" #outletRegistrationType="ngModel"
                            [(ngModel)]="dataObj.outletRegistrationType">
                            <mat-radio-button value="SOLEPROPRIETOR">SOLE
                                PROPRIETOR</mat-radio-button>
                            <mat-radio-button value="PARTNERSHIP" class="ml-3">PARTNERSHIP</mat-radio-button>
                        </mat-radio-group>
                    </div>
                    <div class="d-flex justify-content-end mt-3"
                        *ngIf="dataObj.outletRegistrationType === 'PARTNERSHIP'">
                        <button mat-button color="primary" (click)="addRow()">
                            <mat-icon>add</mat-icon>
                            <span>Add More</span>
                        </button>
                    </div>
                    <p class="f-16-b mt-4" *ngIf="dataObj.outletRegistrationType === 'SOLOPROPRIETOR'">Details
                        of Partner 1*</p>
                    <div style="overflow: hidden;">
                        <form name="partnerForm" #partnerForm="ngForm" (keydown.enter)="$event.preventDefault()">
                            <table mat-table [dataSource]="datasource">
                                <ng-container matColumnDef="Owners">
                                    <td mat-cell *matCellDef="let element;let i = index">
                                        <p class="f-16-b mt-4" *ngIf="dataObj.outletRegistrationType === 'PARTNERSHIP'">
                                            Partner {{ i + 1 }} Information*</p>
                                        <div class="d-flex mt-3">
                                            <mat-form-field appearance="outline" class="w-600 me-5">
                                                <mat-label>First Name</mat-label>
                                                <input autocomplete="off" matInput name="firstName" #firstName="ngModel"
                                                    [(ngModel)]="element.firstName" pattern="^[a-zA-Z]+$" required />
                                                <mat-error *ngIf="firstName.errors?.required">Value is
                                                    required</mat-error>
                                            </mat-form-field>
                                            <mat-form-field appearance="outline" class="w-600">
                                                <mat-label>Last Name</mat-label>
                                                <input autocomplete="off" matInput name="lastName" #lastName="ngModel"
                                                    [(ngModel)]="element.lastName" pattern="^[a-zA-Z]+$" required />
                                                <mat-error *ngIf="lastName.errors?.required">Value is
                                                    required</mat-error>
                                            </mat-form-field>
                                        </div>
                                        <div class="d-flex mt-3">
                                            <mat-form-field appearance="outline" class="w-600 me-5">
                                                <mat-label>Date of Birth</mat-label>
                                                <input matInput [matDatepicker]="picker" name="dob" #dob="ngModel"
                                                    [(ngModel)]="element.dateOfBirth" required>
                                                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                                <mat-datepicker #picker></mat-datepicker>
                                                <mat-error *ngIf="dob.errors?.['required']"> DOB is required*
                                                </mat-error>
                                            </mat-form-field>
                                            <div class="w-600">
                                                <label class="form-label">Outlet Registration Type*</label>
                                                <mat-radio-group aria-mat-label="Select an option"
                                                    [(ngModel)]="element.gender" name="gendr" #gendr="ngModel" required>
                                                    <mat-radio-button value="MALE">Male</mat-radio-button>
                                                    <mat-radio-button value="FEMALE">Female</mat-radio-button>
                                                    <mat-radio-button value="OTHERS">Others</mat-radio-button>
                                                </mat-radio-group>
                                            </div>
                                        </div>
                                        <div class="d-flex mt-3">
                                            <mat-form-field appearance="outline" class="w-600 me-5">
                                                <mat-label>Email</mat-label>
                                                <input autocomplete="off" matInput
                                                    pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
                                                    name="email" #email="ngModel" [(ngModel)]="element.email"
                                                    required />
                                                <mat-error *ngIf="email.errors?.required">Value is required</mat-error>
                                            </mat-form-field>
                                            <mat-form-field appearance="outline" class="w-600">
                                                <mat-label>Mobile Number</mat-label>
                                                <input autocomplete="off" matInput pattern="^[0-9]{10}$" maxlength="10"
                                                    name="mobileNumber" #mobileNumber="ngModel"
                                                    [(ngModel)]="element.mobileNumber" required />
                                                <mat-error *ngIf="mobileNumber.errors?.required">Value is
                                                    required</mat-error>
                                            </mat-form-field>
                                        </div>
                                        <div class="d-flex mt-3">
                                            <mat-form-field appearance="outline" class="w-600">
                                                <mat-label>PAN Number</mat-label>
                                                <input autocomplete="off" matInput pattern="^[A-Z]{5}[0-9]{4}[A-Z]{1}$"
                                                    maxlength="10" name="panNumber" #panNumber="ngModel"
                                                    [(ngModel)]="element.panNumber" required />
                                                <mat-error *ngIf="panNumber.errors?.required">Value is
                                                    required</mat-error>
                                                <mat-error *ngIf="panNumber.errors?.pattern">Invalid PAN
                                                    format</mat-error>
                                            </mat-form-field>
                                        </div>
                                        
                                    </td>
                                </ng-container>
                                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                            </table>
                        </form>
                    </div>
                    <div class="d-flex justify-content-end mt-3">
                        <button mat-stroked-button color="accent" class="me-3"
                            style="height: 48px;width: 130px;">Cancel</button>
                        <button mat-flat-button color="accent" matStepperNext style="height: 48px;width: 146px;"
                            [disabled]="!partnerForm.valid">Next</button>
                    </div>
                </div>
            </mat-step>

            <mat-step>
                <ng-template matStepLabel>OUTLET ADDRESS</ng-template>
                <form name="addressForm" #addressForm="ngForm" (keydown.enter)="$event.preventDefault()">
                    <div class="d-flex mt-3">
                        <mat-form-field appearance="outline" class="w-600 me-5">
                            <mat-label>Address Line1</mat-label>
                            <input autocomplete="off" matInput pattern="" placeholder="" name="addressLine1"
                                #addressLine1="ngModel" [(ngModel)]="dataObj.baseAddress.addressLine1"
                                pattern="^[a-zA-Z0-9\s,./#-]{1,100}$" required />
                            <mat-error *ngIf="addressLine1?.errors?.required">Value is required</mat-error>
                        </mat-form-field>
                        <mat-form-field appearance="outline" class="w-600">
                            <mat-label>Address Line2</mat-label>
                            <input autocomplete="off" matInput pattern="" placeholder="" name="addressLine2"
                                #addressLine2="ngModel" [(ngModel)]="dataObj.baseAddress.addressLine2"
                                pattern="^[a-zA-Z0-9\s,./#-]{1,100}$" required />
                            <mat-error *ngIf="addressLine2.errors?.required">Value is required</mat-error>
                        </mat-form-field>
                    </div>
                    <div class="d-flex mt-3">
                        <mat-form-field appearance="outline" class="w-600 me-5">
                            <mat-label>Zip Code</mat-label>
                            <input autocomplete="off" matInput pattern="" placeholder="" name="pinCode"
                                #pinCode="ngModel" [(ngModel)]="dataObj.baseAddress.pinCode" pattern="^[1-9][0-9]{5}$"
                                required />
                            <mat-error *ngIf="pinCode.errors?.required">Value is required</mat-error>
                        </mat-form-field>
                        <mat-form-field appearance="outline" class="w-600">
                            <mat-label>City</mat-label>
                            <input autocomplete="off" matInput pattern="" placeholder="" name="city" #city="ngModel"
                                [(ngModel)]="dataObj.baseAddress.city" pattern="^[a-zA-Z\s.'-]{2,100}$" required />
                            <mat-error *ngIf="city.errors?.required">Value is required</mat-error>
                        </mat-form-field>
                    </div>
                    <div class="d-flex mt-3">
                        <mat-form-field appearance="outline" class="w-600 me-5">
                            <mat-label>State</mat-label>
                            <input autocomplete="off" matInput pattern="" placeholder="" name="state" #state="ngModel"
                                [(ngModel)]="dataObj.baseAddress.state" pattern="^[a-zA-Z\s.'-]{2,100}$" required />
                            <mat-error *ngIf="state.errors?.required">Value is required</mat-error>
                        </mat-form-field>
                        <mat-form-field appearance="outline" class="w-600">
                            <mat-label>Country</mat-label>
                            <input autocomplete="off" matInput pattern="" placeholder="" name="country"
                                #country="ngModel" [(ngModel)]="dataObj.baseAddress.country"
                                pattern="^[a-zA-Z\s.'-]{2,100}$" required />
                            <mat-error *ngIf="country.errors?.required">Value is required</mat-error>
                        </mat-form-field>
                    </div>
                </form>
                <div class="d-flex justify-content-end mt-3">
                    <button mat-stroked-button color="accent" class="me-3"
                        style="height: 48px;width: 130px;">Cancel</button>
                    <button mat-flat-button color="accent" matStepperNext style="height: 48px;width: 146px;"
                         (click)="submit()">Submit</button>
                </div>
            </mat-step>
        </mat-stepper>
    </mat-card>
</div>