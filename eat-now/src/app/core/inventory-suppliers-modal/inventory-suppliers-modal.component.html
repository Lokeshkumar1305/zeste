<div class="modal-slide-in">
  <div class="modal-header d-flex align-items-center justify-content-between">
    <div>
      <p class="f-18-m mb-0">
        <i class="bi bi-building me-2"></i>
        {{ isEditMode ? 'Edit Supplier' : 'Add New Supplier' }}
      </p>
      <small class="text-muted">Manage shops and vendors you purchase from</small>
    </div>
    <button mat-icon-button (click)="onCancel()" class="text-muted">
      <i class="bi bi-x-lg"></i>
    </button>
  </div>

  <div class="modal-body">
    <div class="help-box mb-4">
      <div class="help-icon">
        <i class="bi bi-lightbulb"></i>
      </div>
      <div class="help-content">
        <strong>What is a Supplier?</strong>
        <p class="mb-0">Any store, wholesaler, or company you buy inventory from â€” local kirana, online seller,
          distributor, etc.</p>
      </div>
    </div>

    <form #supplierForm="ngForm">
      <div class="row g-3">
        <div class="col-12">
          <mat-label class="required">Supplier Name</mat-label>
          <mat-form-field appearance="outline" class="w-100 mt-1">
            <mat-icon matPrefix>store</mat-icon>
            <input matInput [(ngModel)]="supplier.name" name="name" required
              placeholder="e.g. Reliance Fresh, Big Basket" />
          </mat-form-field>
        </div>

        <div class="col-12 col-md-6">
          <mat-label>Contact Person</mat-label>
          <mat-form-field appearance="outline" class="w-100 mt-1">
            <mat-icon matPrefix>person</mat-icon>
            <input matInput [(ngModel)]="supplier.contactPerson" name="contactPerson" placeholder="e.g. Mr. Rajesh" />
          </mat-form-field>
        </div>

        <div class="col-12 col-md-6">
          <mat-label class="required">Phone Number</mat-label>
          <mat-form-field appearance="outline" class="w-100 mt-1">
            <mat-icon matPrefix>phone</mat-icon>
            <input matInput [(ngModel)]="supplier.phone" name="phone" required placeholder="9876543210" />
          </mat-form-field>
        </div>

        <div class="col-12 col-md-6">
          <mat-label>Email</mat-label>
          <mat-form-field appearance="outline" class="w-100 mt-1">
            <mat-icon matPrefix>email</mat-icon>
            <input matInput type="email" [(ngModel)]="supplier.email" name="email" placeholder="supplier@example.com" />
          </mat-form-field>
        </div>

        <div class="col-12 col-md-6">
          <mat-label>GST Number (Optional)</mat-label>
          <mat-form-field appearance="outline" class="w-100 mt-1">
            <input matInput [(ngModel)]="supplier.gst" name="gst" placeholder="22AAAAA0000A1Z5" />
          </mat-form-field>
        </div>

        <div class="col-12">
          <mat-label>Address</mat-label>
          <mat-form-field appearance="outline" class="w-100 mt-1">
            <mat-icon matPrefix>location_on</mat-icon>
            <textarea matInput rows="3" [(ngModel)]="supplier.address" name="address"
              placeholder="Full shop address..."></textarea>
          </mat-form-field>
        </div>

        <div class="col-12">
          <mat-checkbox [(ngModel)]="supplier.isActive" name="isActive" color="primary">
            Active Supplier (currently purchasing from)
          </mat-checkbox>
        </div>
      </div>
    </form>

    <!-- Preview -->
    <div class="preview-card mt-5" *ngIf="supplier.name">
      <div class="card-header">
        <i class="bi bi-building"></i> Supplier Preview
      </div>
      <div class="card-body">
        <div class="info-row"><strong>{{ supplier.name }}</strong></div>
        <div class="info-row" *ngIf="supplier.contactPerson"><i class="bi bi-person"></i> {{ supplier.contactPerson }}
        </div>
        <div class="info-row" *ngIf="supplier.phone"><i class="bi bi-telephone"></i> {{ supplier.phone }}</div>
        <div class="info-row" *ngIf="supplier.email"><i class="bi bi-envelope"></i> {{ supplier.email }}</div>
        <div class="info-row" *ngIf="supplier.address"><i class="bi bi-geo-alt"></i> {{ supplier.address }}</div>
      </div>
    </div>
  </div>

  <div class="modal-footer d-flex justify-content-end gap-3">
    <button mat-stroked-button (click)="onCancel()">Cancel</button>
    <button mat-flat-button color="primary" (click)="onSave()" [disabled]="!supplierForm.valid">
      <i class="bi bi-check2 me-1"></i> {{ isEditMode ? 'Update' : 'Add' }} Supplier
    </button>
  </div>
</div>