<div class="modal-slide-in">
  <div class="modal-header d-flex align-items-center justify-content-between">
    <div>
      <p class="f-18-m mb-0">
        <i class="bi bi-rulers me-2"></i>
        {{ isEditMode ? 'Edit Unit' : 'Add New Unit' }}
      </p>
      <small class="text-muted">Define how items are measured (kg, pcs, liters, etc.)</small>
    </div>
    <button mat-icon-button (click)="onCancel()" class="text-muted">
      <i class="bi bi-x-lg"></i>
    </button>
  </div>

  <div class="modal-body">
    <div class="help-box mb-4">
      <div class="help-icon">
        <i class="bi bi-lightbulb"></i>
      </div>
      <div class="help-content">
        <strong>What is a Unit?</strong>
        <p class="mb-0">Units define how you count items: Rice → Kilograms (kg), Chairs → Pieces (pcs), Milk → Liters
          (L)</p>
      </div>
    </div>

    <div class="quick-chips mb-4">
      <span class="label">Quick Add:</span>
      <button type="button" class="chip" *ngFor="let ex of quickUnits" (click)="applyQuickUnit(ex)">
        {{ ex.name }} ({{ ex.short }})
      </button>
    </div>

    <form #unitForm="ngForm">
      <div class="row g-3">
        <div class="col-12 col-md-6">
          <mat-label class="required">Full Name</mat-label>
          <mat-form-field appearance="outline" class="w-100 mt-1">
            <input matInput [(ngModel)]="unit.name" name="name" required placeholder="e.g. Kilograms" />
          </mat-form-field>
        </div>

        <div class="col-12 col-md-6">
          <mat-label class="required">Short Name</mat-label>
          <mat-form-field appearance="outline" class="w-100 mt-1">
            <input matInput [(ngModel)]="unit.shortName" name="shortName" required maxlength="10"
              placeholder="e.g. kg" />
            <mat-hint>Max 10 characters</mat-hint>
          </mat-form-field>
        </div>

        <div class="col-12">
          <mat-label>Description (Optional)</mat-label>
          <mat-form-field appearance="outline" class="w-100 mt-1">
            <textarea matInput rows="3" [(ngModel)]="unit.description" name="description"
              placeholder="When to use this unit..."></textarea>
          </mat-form-field>
        </div>

        <div class="col-12">
          <mat-checkbox [(ngModel)]="unit.isActive" name="isActive" color="primary">
            Active (available for new items)
          </mat-checkbox>
        </div>
      </div>
    </form>

    <div class="preview-box mt-5" *ngIf="unit.name && unit.shortName">
      <div class="preview-label">Preview in lists:</div>
      <div class="preview-display">
        <span class="badge">{{ unit.shortName }}</span>
        <span class="text">{{ unit.name }}</span>
      </div>
    </div>
  </div>

  <div class="modal-footer d-flex justify-content-end gap-3">
    <button mat-stroked-button (click)="onCancel()">Cancel</button>
    <button mat-flat-button color="primary" (click)="onSave()" [disabled]="!unitForm.valid">
      <i class="bi bi-check2 me-1"></i> {{ isEditMode ? 'Update' : 'Add' }} Unit
    </button>
  </div>
</div>